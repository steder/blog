<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Playing Words with Friends</title>
  <meta name="description" content="Words with FriendsWords with Friends, if you&#39;re not already familiar, is a game of Scrabble that lets you play asynchronously with friends over the internet....">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/python/programming/gaming/2012/01/28/playing-words-with-friends.html">
  <link rel="alternate" type="application/rss+xml" title="Your awesome title" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Your awesome title</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
            <a class="page-link" href="/about.html">about</a>
            
          
            
            
          
            
            
            <a class="page-link" href="/">I love computers</a>
            
          
            
            
            <a class="page-link" href="/projects.html">projects</a>
            
          
            
            
            <a class="page-link" href="/timeline.html">timeline</a>
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Playing Words with Friends</h1>
    <p class="post-meta">
      <time datetime="2012-01-28T00:00:00-06:00" itemprop="datePublished">
        
        Jan 28, 2012
      </time>
      </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <div class='post'>
<span style="font-family: inherit; font-size: large;">Words with Friends</span><br /><span style="font-family: inherit;"><a href="http://www.wordswithfriends.com/">Words with Friends</a>, if you're not already familiar, is a game of Scrabble that lets you play asynchronously with friends over the internet.</span><br /><span style="font-family: inherit;"><br /></span><br /><span style="font-family: inherit;">I recently started playing WoF because I like to think I have a large vocabulary and rarely get the opportunity to use it. &nbsp;I also enjoy playing boardgames like Scrabble but between work and ... sleep... I don't often get the chance to get together with my friends and play </span><a href="http://boardgamegeek.com/boardgame/24508/taluva" style="font-family: inherit;">Taluva </a><span style="font-family: inherit;">into the wee hours.</span><br /><span style="font-family: inherit;"><br /></span><br /><span style="font-family: inherit;">Anyway, I have a confession to make.</span><br /><span style="font-family: inherit;"><br /></span><br /><span style="font-family: inherit; font-size: large;">I'm terrible at Words with Friends</span><br /><span style="font-family: inherit;">Whenever it is my turn I look at my hand of letters: &nbsp;</span><span style="font-family: inherit;">ILNIREE</span><br /><span style="font-family: inherit;">And think: &nbsp;</span><span style="font-family: inherit;">ILNIREE is not a word. &nbsp;Darn.</span><br /><span style="font-family: inherit;">And then I start to mentally rearrange letters to see if I can make other words. &nbsp;WoF's conveniently includes a "Shuffle" button so I hit that a few times... &nbsp;And while given enough time I do come up with a word a few things bug me about this process.</span><br /><span style="font-family: inherit;">First of all, years of Google and Wikipedia use have atrophied important muscles like "memory". &nbsp;Second, i'm a programmer and that means:</span><br /><span style="font-family: inherit;"><br /></span><br /><span style="font-family: inherit; font-size: large;">Laziness<sup>1</sup></span><br /><span style="font-family: inherit;">Basically shuffling letters and checking or guessing that they are words is a perfectly straightforward although not terribly efficient way to try to optimize your scrabble game. &nbsp;Of course, it's got a lot of drawbacks if you try to do it by hand. &nbsp;It's slow and it's uninteresting. &nbsp;To try to find every word possible with any of your 7 letters you'd need to try all permutations and there are over 10,000 permutations of 7 letters. &nbsp;</span><br /><br /><span style="font-family: inherit;">Anyway, I'm bad at Words with Friends but I like programming so once I started playing WoF of course I gravitated towards...</span><br /><span style="font-family: inherit;"><br /></span><br /><span style="font-family: inherit; font-size: large;">Solving Words with Friends<sup>2</sup></span><br /><span style="font-family: inherit;">Boring and repetitive work is exactly what computers are good at it! &nbsp;In fact the Python program to generate all possible permutations of 7 letters (1 letter words, 2 letter words, 3 letter words, etc) is pretty straightforward especially with a little help from our friend <a href="http://docs.python.org/library/itertools.html">itertools</a>.</span><br /><span style="font-family: inherit;">My first and simplest attempt involved putting the contents of the standard unix dictionary (/usr/share/dict/words) into a python dictionary (an excellent hash table implementation).&nbsp;</span><br />This isn't exactly what I came up with first but it should illustrate what I'm talking about:<br /><script src="https://gist.github.com/1653998.js?file=words_simple.py"></script><br /><br />Of course you end up looking at a lot of permutations for 7 letters (~13 thousand) so this can take a little while.  It's still not slow on any reasonable computer but when you start adding in other letters to try and find words that might fit in with available spots on the board things can slow down.  For example, say you could play words that begin with t, l, or r.  Running the above getScrabbleLetters function for 10 letters requires you to check&nbsp;9,864,101 permutations. <br /><br />Worse still, if you add in the notion of wildcards (9 letters plus some character like '*' to represent a wildcard) you end up repeating those over 9 million lookups 26 times to check all the other possible letters of the alphabet in the wildcard slot. &nbsp;That's over 250 million dictionary lookups to find a fairly small list of unique words.<br /><br />However, if we step back for a moment and think about anagrams, a simple tweak can help process larger strings (and strings with wildcards) much more quickly.<br /><br />Imagine you've got a couple anagrams like "was" and "saw". &nbsp;They've got the same letters but count as two different words in our dictionary and require two separate lookups. &nbsp;If we shift our perspective a little bit and start thinking about the letters as what's important we get some very nice performance improvements.<br /><br />We still use a hash table as our primary data structure but instead of using the words as the keys we use the sorted letters of a word as the key. &nbsp;The values become lists of all the words which include those same letters. &nbsp;It's a little bit more work to insert, as we first have to calculate what the key would be, and it's a little more work to lookup, as we have to iterate over the list of possible words. &nbsp;But it's great any time we care just about anagrams and it's much more efficient in terms of the number of lookups required to find all the scrabble words. &nbsp;For example, for the same 10 letter case from earlier we now need only&nbsp;1024 lookups. &nbsp;~26 thousand lookups for the wildcard case.<br /><br />Without further ado that solution looks like this:<br /><br /><script src="https://gist.github.com/1653998.js?file=sorted.py"></script> <br /><br />One other really useful bit is a quick way to look for all the words that have a given suffix or prefix.  This is a little trickier than the anagram case but it's also more interesting because I got to spend a little time reading about a new data structure, a Trie.  A Trie is a tree-like structure optimized for storing strings. &nbsp;The root node of the tree represents the empty string and each of its children represents the first letter of a word. &nbsp;Every child of these nodes is the next letter in a word starting with that substring. &nbsp;<span style="font-family: inherit;"><br /></span><br /><br />For example, a trie of nodes for the words "an apple yum" would look like:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-_yB946MXC2c/TxtAs0Lpi-I/AAAAAAAAAgM/l40QlNz4vBU/s1600/trie.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://2.bp.blogspot.com/-_yB946MXC2c/TxtAs0Lpi-I/AAAAAAAAAgM/l40QlNz4vBU/s320/trie.png" width="163" /></a></div><br />So the trie solution for finding words that begin with a certain prefix is:<br /><br /><script src="https://gist.github.com/1653998.js?file=trie.py"></script> <br /><br />The suffix version is just a couple more lines with judicious use of the <a href="http://docs.python.org/library/functions.html#reversed">reversed</a> function.<br /><br /><span style="font-size: large;">Conclusion and Next Steps</span><br />I think that Words with Friends is a lot more fun now that I have my computer as a crutch. &nbsp;I've enjoyed playing with some simple algorithms for finding algorithms and looking up strings.<br /><br />My next steps after today are going to be putting up my utilities here on my website so that I can share them with my non-programmer friends. &nbsp;Building a simple web service for solving/cheating at scrabble is a hopefully interesting topic in its own right so building that will probably be my next blog post.<br /><br />After that I'm interested in taking this to its logical conclusion and actually building (and blogging about) a scrabble solver where you can enter in the whole state of the scrabble board and your hand and have it tell you all your possible moves (or at least the subset of moves that give you higher scores).<br /><br />If you made it this far you might be interested in the actual tested source code <a href="https://github.com/steder/words">here on github</a>.<br /><br /><span style="font-family: inherit;">1</span><br /><dl><dd><span style="font-family: inherit;"><a href="http://en.wikipedia.org/wiki/Larry_Wall">Larry Wall</a>&nbsp;calls this the first great virtue of a programmer. &nbsp;</span></dd><dt>2</dt><dd>Perhaps a more honest heading here would be "Cheating at Words With Friends" :-)</dd> <span style="font-family: inherit;"></span><div><div><span style="font-family: inherit;"></span></div><span style="font-family: inherit;"> </span></div></dl></div>

  </div>

  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Your awesome title</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Your awesome title
            
            </li>
            
            <li><a href="mailto:your-email@example.com">your-email@example.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/jekyll"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">jekyll</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/jekyllrb"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">jekyllrb</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
